<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOP SEO Calculadoras ‚Äî Gamificado</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,500;9..40,700;9..40,800&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:#080c14;color:#e2e8f0;font-family:'DM Sans','Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(245,158,11,.35)}50%{box-shadow:0 0 0 10px rgba(245,158,11,0)}}
@keyframes glow{0%,100%{text-shadow:0 0 20px rgba(245,158,11,.3)}50%{text-shadow:0 0 40px rgba(245,158,11,.6)}}
.mono{font-family:'Space Mono',monospace}
.code{font-family:'JetBrains Mono','Fira Code',monospace}
.hidden{display:none!important}

/* Badge overlay */
.badge-overlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}
.badge-card{background:linear-gradient(145deg,#1e293b,#0f172a);border:2px solid #f59e0b;border-radius:28px;padding:52px 48px;text-align:center;box-shadow:0 0 100px rgba(245,158,11,.2);animation:popIn .4s cubic-bezier(.175,.885,.32,1.275);max-width:400px;width:90%}
.badge-icon{font-size:72px;margin-bottom:20px}
.badge-label{color:#f59e0b;font-size:12px;font-weight:700;letter-spacing:5px;margin-bottom:8px}
.badge-name{color:#f1f5f9;font-size:30px;font-weight:800;margin-bottom:28px}
.badge-btn{background:linear-gradient(135deg,#f59e0b,#d97706);border:none;color:#000;font-weight:800;padding:14px 36px;border-radius:14px;cursor:pointer;font-size:15px;font-family:inherit}

/* Prompt blocks */
.prompt-block{background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.07);border-radius:14px;margin-bottom:20px;overflow:hidden}
.prompt-toggle{width:100%;background:none;border:none;color:#e2e8f0;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-family:inherit;font-size:15px;font-weight:700;text-align:left}
.prompt-toggle:hover{background:rgba(255,255,255,.02)}
.prompt-icon{color:#f59e0b;font-size:18px;margin-right:10px}
.prompt-arrow{transition:transform .3s;font-size:11px;opacity:.4}
.prompt-arrow.open{transform:rotate(180deg)}
.prompt-body{padding:0 22px 22px}
.prompt-note{color:#f59e0b;font-size:13px;margin-bottom:14px;font-style:italic;line-height:1.5}
.prompt-pre{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.05);border-radius:10px;padding:18px;color:#cbd5e1;font-size:12.5px;line-height:1.7;overflow-x:auto;white-space:pre-wrap;word-break:break-word;max-height:520px;overflow-y:auto;font-family:'JetBrains Mono','Fira Code',monospace}
.copy-btn{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:#94a3b8;padding:6px 16px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .25s;font-family:inherit;font-weight:600;float:right;margin-bottom:10px}
.copy-btn.copied{background:#22c55e;color:#fff;border-color:#22c55e}

/* Info boxes */
.info-box{border-radius:12px;padding:18px;margin-top:16px}
.info-box.amber{background:rgba(245,158,11,.08);border:1px solid rgba(245,158,11,.25)}
.info-box.green{background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.25)}
.info-box.red{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.25)}
.info-box.blue{background:rgba(59,130,246,.08);border:1px solid rgba(59,130,246,.25)}
.info-box.purple{background:rgba(139,92,246,.08);border:1px solid rgba(139,92,246,.25)}
.info-box.pink{background:rgba(236,72,153,.08);border:1px solid rgba(236,72,153,.25)}

/* Section titles */
.section-title{color:#e2e8f0;font-size:16px;font-weight:700;margin-top:32px;margin-bottom:14px;font-family:'Space Mono',monospace;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:10px}
.step-list{color:#cbd5e1;font-size:14px;line-height:2.2;padding-left:22px;margin:0}

/* Check items */
.check-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;cursor:pointer;font-size:14px;line-height:1.5;transition:color .2s}
.check-item.done{color:#22c55e}
.check-item.undone{color:#94a3b8}
.check-box{width:22px;height:22px;min-width:22px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s;margin-top:1px}
.check-box.done{border:2px solid #22c55e;background:rgba(34,197,94,.12)}
.check-box.undone{border:2px solid rgba(255,255,255,.18);background:transparent}
.check-text.done{text-decoration:line-through;opacity:.55}

/* Phase cards */
.phase-card{border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s}
.phase-card:hover{transform:translateX(4px)}

/* Buttons */
.complete-btn{width:100%;padding:18px 24px;border:none;border-radius:14px;font-size:16px;font-weight:800;cursor:pointer;font-family:'Space Mono',monospace;letter-spacing:1px;transition:transform .15s;margin-top:12px}
.complete-btn:active{transform:scale(.97)}
.complete-btn.gold{background:linear-gradient(135deg,#f59e0b,#d97706);color:#000}
.complete-btn.green{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}

/* Nav bar */
.nav-bar{background:rgba(0,0,0,.5);border-bottom:1px solid rgba(255,255,255,.06);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.back-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:#94a3b8;padding:8px 18px;border-radius:8px;cursor:pointer;font-size:13px;font-family:inherit;font-weight:600;transition:all .2s}
.back-btn:hover{background:rgba(255,255,255,.1);color:#e2e8f0}

/* Sub tabs */
.sub-tab{padding:12px 22px;border-radius:10px;cursor:pointer;font-size:14px;font-weight:700;font-family:inherit;transition:all .2s;border:none;color:#fff}
.sub-tab.active-blue{background:#3b82f6}
.sub-tab.active-purple{background:#8b5cf6}
.sub-tab.active-pink{background:#ec4899}
.sub-tab.inactive{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1)}

/* Hero */
.hero{background:linear-gradient(170deg,#0c1220,#0a0f1a 40%,#111827);border-bottom:1px solid rgba(255,255,255,.04);padding:56px 20px 52px;text-align:center;position:relative;overflow:hidden}
.hero-grid{position:absolute;inset:0;opacity:.04;background-image:linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.1) 1px,transparent 1px);background-size:48px 48px}
.hero-inner{position:relative;max-width:700px;margin:0 auto}
.hero-tag{display:inline-block;background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.25);border-radius:8px;padding:6px 16px;font-size:12px;font-weight:700;color:#f59e0b;letter-spacing:2px;margin-bottom:20px}
.hero-title{font-size:clamp(28px,5vw,44px);font-weight:800;line-height:1.15;margin-bottom:16px;background:linear-gradient(135deg,#f1f5f9,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-sub{font-size:clamp(15px,2.5vw,18px);color:#64748b;margin-bottom:36px;line-height:1.6}

/* XP bar */
.xp-wrap{max-width:420px;margin:0 auto}
.xp-row{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px}
.xp-bar-outer{height:10px;background:rgba(255,255,255,.04);border-radius:5px;border:1px solid rgba(255,255,255,.06);overflow:hidden}
.xp-bar-inner{height:100%;border-radius:5px;transition:width .8s cubic-bezier(.22,1,.36,1)}
.xp-bar-inner.complete{background:linear-gradient(90deg,#22c55e,#16a34a)}
.xp-bar-inner.progress{background:linear-gradient(90deg,#f59e0b,#ef4444,#ec4899);box-shadow:0 0 12px rgba(245,158,11,.3)}

/* Badges row */
.badges-row{margin-top:20px;display:flex;justify-content:center;gap:8px;flex-wrap:wrap}
.badge-pill{background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.2);border-radius:8px;padding:4px 12px;font-size:11px;color:#f59e0b;font-weight:700}

/* Timeline */
.timeline-wrap{max-width:680px;margin:0 auto;padding:40px 20px 80px}
.timeline-item{position:relative;padding-left:52px;margin-bottom:16px}
.timeline-line{position:absolute;left:21px;top:48px;bottom:-16px;width:2px;background:rgba(34,197,94,.25)}
.timeline-dot{position:absolute;left:8px;top:16px;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800}
.timeline-dot.done{background:#22c55e;color:#fff}
.timeline-dot.next{background:#f59e0b;color:#000;animation:pulse 2s infinite}

/* Phase detail */
.phase-detail{max-width:780px;margin:0 auto;padding:0 20px 60px;animation:fadeIn .4s}
.phase-header{padding:48px 20px 0;max-width:780px;margin:0 auto}
.phase-meta{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:32px}
.phase-tag{border-radius:8px;padding:5px 14px;font-size:12px}

/* Final card */
.final-card{margin-top:48px;padding:44px 32px;background:linear-gradient(145deg,rgba(34,197,94,.06),rgba(245,158,11,.04));border:2px solid rgba(34,197,94,.2);border-radius:24px;text-align:center;animation:fadeIn .6s}
.final-title{font-size:28px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,#22c55e,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.final-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:32px}
.final-item{background:rgba(34,197,94,.06);border:1px solid rgba(34,197,94,.12);border-radius:10px;padding:12px;font-size:12px;color:#4ade80;font-weight:600}
.reset-btn{margin-top:20px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:#64748b;padding:10px 24px;border-radius:10px;cursor:pointer;font-size:12px;font-family:inherit}

/* QA progress */
.qa-bar-outer{height:8px;background:rgba(255,255,255,.05);border-radius:4px;margin-bottom:6px}
.qa-bar-inner{height:100%;border-radius:4px;transition:width .4s}

/* Timeline summary */
.summary-box{margin-top:40px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:24px}
.summary-grid{display:grid;grid-template-columns:1fr auto;gap:8px 20px;font-size:13px}
</style>
</head>
<body>

<div id="badge-popup" class="badge-overlay hidden">
  <div class="badge-card">
    <div id="badge-popup-icon" class="badge-icon"></div>
    <div class="badge-label mono">BADGE DESBLOQUEADO</div>
    <div id="badge-popup-name" class="badge-name mono"></div>
    <button class="badge-btn" onclick="closeBadge()">¬°SIGUIENTE FASE!</button>
  </div>
</div>

<div id="view-map"></div>
<div id="view-phase" class="hidden"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PHASES = [
  {id:1,icon:"üí°",title:"Generar 100 Ideas de Nichos",subtitle:"Opciones infinitas. Elige la que TE APASIONE.",time:"8-10 min",xp:150,output:"Lista de 100 nichos viables",badge:"IDEATOR",badgeIcon:"üß†"},
  {id:2,icon:"üîç",title:"An√°lisis Competencia & Arquitectura",subtitle:"Esp√≠a a la competencia. Luego, sup√©ralos.",time:"15-20 min",xp:250,output:"Lista de URLs con an√°lisis",badge:"STRATEGIST",badgeIcon:"üéØ"},
  {id:3,icon:"üîë",title:"Keyword Research Profundo",subtitle:"Encuentra las palabras clave que Google ADORA.",time:"12-15 min",xp:300,output:"Inputs organizados para cada URL",badge:"KEYWORD HUNTER",badgeIcon:"üèπ"},
  {id:4,icon:"‚öôÔ∏è",title:"Crear URLs (Calc + Blog + Tools)",subtitle:"Cada p√°gina = un archivo .html independiente",time:"5-10 min c/u",xp:500,output:"N URLs SEO optimizadas",badge:"BUILDER",badgeIcon:"üèóÔ∏è"},
  {id:5,icon:"‚öñÔ∏è",title:"Crear P√°ginas Legales",subtitle:"Protecci√≥n legal. Necesarias para operar.",time:"25-30 min",xp:200,output:"Privacidad, T√©rminos, Aviso Legal",badge:"COMPLIANT",badgeIcon:"üõ°Ô∏è"},
  {id:6,icon:"üè†",title:"P√°gina Inicio + Header/Footer",subtitle:"Tu vitrina al mundo.",time:"15-17 min",xp:250,output:"index.html + header-footer.html",badge:"ARCHITECT",badgeIcon:"üèõÔ∏è"},
  {id:7,icon:"‚úÖ",title:"QA Final & Publicaci√≥n",subtitle:"√öltimas revisiones. Luego: al mundo.",time:"10-15 min",xp:350,output:"Sitio completamente funcional",badge:"LAUNCHER",badgeIcon:"üöÄ"},
];
const TOTAL_XP = PHASES.reduce((s,p)=>s+p.xp,0);

let completed = [];
try { completed = JSON.parse(localStorage.getItem('sop_done')||'[]'); } catch(e){}
let qaChecks = {};
try { qaChecks = JSON.parse(localStorage.getItem('sop_qa')||'{}'); } catch(e){}

function save(){
  try{localStorage.setItem('sop_done',JSON.stringify(completed));localStorage.setItem('sop_qa',JSON.stringify(qaChecks));}catch(e){}
}
function getXP(){return completed.reduce((s,id)=>s+(PHASES.find(p=>p.id===id)?.xp||0),0)}
function getLevel(){const n=completed.length;return n===0?"NOVATO":n<=2?"APRENDIZ":n<=4?"PRO":n<=6?"EXPERTO":"MAESTRO SEO"}
function getPct(){return Math.round((getXP()/TOTAL_XP)*100)}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BADGE POPUP
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showBadge(phase){
  document.getElementById('badge-popup-icon').textContent=phase.badgeIcon;
  document.getElementById('badge-popup-name').textContent=phase.badge;
  document.getElementById('badge-popup').classList.remove('hidden');
}
function closeBadge(){document.getElementById('badge-popup').classList.add('hidden')}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// COPY
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function copyPrompt(btnId,text){
  navigator.clipboard.writeText(text).then(()=>{
    const b=document.getElementById(btnId);
    b.textContent='‚úì Copiado';b.classList.add('copied');
    setTimeout(()=>{b.textContent='üìã Copiar prompt';b.classList.remove('copied')},2000);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PROMPT DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PROMPTS = {};

PROMPTS.P1 = `=== GENERADOR DE 100 IDEAS DE NICHOS SEO RENTABLES ===

CONTEXTO:
Soy emprendedor digital que quiere crear sitios de calculadoras online para ganar dinero.
Objetivo: Obtener 100 ideas de nichos REALES y VIABLES en [PA√çS-DESTINO].

CRITERIOS DE FILTRO (ESTRICTOS):
1. Volumen de b√∫squedas: 600-10000/mes (debe tener demanda real)
2. Competencia: BAJA-MEDIA (no dominado por Google o sitios gigantes)
3. Potencial monetario: EUR 500-3000+/mes realista
4. Validaci√≥n: Que EXISTA demanda real en [PA√çS-DESTINO]
5. Calculadora viable: Que tenga sentido crear una herramienta interactiva

INSTRUCCIONES DE AN√ÅLISIS:
Para cada nicho, debes:
- Pensar COMO PERSONA que vive en [PA√çS-DESTINO]
- Entender necesidades reales y psicolog√≠a del mercado
- Investigar micronichos no saturados
- Considerar estacionalidad y tendencias
- Pensar en PROBLEMAS reales que la gente resuelve con calculadoras

DIVERSIDAD DE CATEGOR√çAS:
Incluye nichos de:
- Finanzas (hipotecas, cr√©ditos, impuestos, inversiones)
- Construcci√≥n & Hogar (presupuestos, materiales, reforma)
- Salud & Fitness (calor√≠as, IMC, edad biol√≥gica, etc.)
- Educaci√≥n (becas, costos estudio, etc.)
- Energ√≠a (consumo el√©ctrico, solar, etc.)
- Seguros (c√°lculo de primas, etc.)
- Viajes (presupuestos, conversiones)
- Negocios (m√°rgenes, ROI, payback, etc.)
- Automotor (financiamiento, consumo combustible)
- Y m√°s...

FORMATO DE RESPUESTA (OBLIGATORIO):
Devuelve EXACTAMENTE 100 ideas en este formato CSV:

Ranking | Nicho | Palabra Clave Principal | Volumen/Mes Est. | Viabilidad | Por Qu√© Funciona | Potencial Mensual EUR | Categor√≠a

Ejemplo de filas:
1 | Calculadora de Hipotecas | "hypothekenrechner" | 1800 | ALTA | Alemanes buscan financiamiento. Alto ticket. | 1500-2500 | Finanzas
2 | Calculadora de Impuestos | "steuerrechner" | 2100 | ALTA | Anual. Millones lo buscan. Recurrente. | 1200-2000 | Impuestos

REGLAS IMPORTANTES:
- NO repitas nichos (cada uno √∫nico)
- Los vol√∫menes deben ser REALISTAS (investiga mercados reales)
- Incluye nichos obvios Y nichos ocultos
- Prioriza "evergreen" (buscan TODO el a√±o, no solo ciertas √©pocas)
- Considera demanda REAL, no especulaci√≥n

AHORA GENERA LOS 100 NICHOS.
Responde en formato CSV directo (sin preamble ni explicaciones).`;

PROMPTS.P2 = `=== AN√ÅLISIS COMPETIDOR & ARQUITECTURA DE URLs ===

CONTEXTO:
Eleg√≠ el nicho: [NICHO-ELEGIDO]
Palabra clave principal: [PALABRA-CLAVE-PRINCIPAL]
Pa√≠s/Idioma: [PA√çS-IDIOMA]

PARTE 1: AN√ÅLISIS DE COMPETENCIA

Necesito que analices a los competidores TOP 10 de esta palabra clave:
- ¬øCu√°ntas URLs/p√°ginas tienen cada sitio?
- ¬øCu√°l es la estructura de navegaci√≥n?
- ¬øTienen calculadora, blog, o ambas?
- ¬øQu√© palabras clave secundarias atacan?
- ¬øCu√°ntos art√≠culos de blog?
- ¬øTienen "tools" o herramientas secundarias?

Responde en este formato:

**Competidor 1 (sitio):**
- URLs totales: [n√∫mero]
- Estructura: [descripci√≥n]
- Herramientas: [lista]
- Palabras clave: [lista de 5 principales]
- Estrategia: [resumen]

[Repite para competidores 2-10]

PARTE 2: AN√ÅLISIS DE GAPS

Con base en lo que viste, responde:
- ¬øQu√© URLs crean los competidores?
- ¬øQu√© Keywords NO atacan (oportunidades)?
- ¬øQu√© palabras clave long-tail est√°n desatendidas?
- ¬øHay demanda sin oferta?

PARTE 3: ARQUITECTURA RECOMENDADA

Bas√°ndote en el an√°lisis anterior, RECOMIENDA:

1. ¬øCu√°ntas URLs M√çNIMO debe tener mi sitio? JUSTIFICA por qu√© ese n√∫mero

2. Para CADA URL propuesta:
   - Nombre/T√≠tulo: [nombre]
   - URL amigable: /url-en-minusculas/
   - Palabra clave objetivo: [kw]
   - B√∫squedas estimadas/mes: [n√∫mero]
   - Tipo de p√°gina: [Calculadora / Blog / Herramienta / Informativa / Legal]
   - Por qu√© la incluyo: [justificaci√≥n de oportunidad]
   - Dificultad SEO: [BAJA/MEDIA/ALTA]
   - Prioridad: [1=M√ÅXIMA, 2=ALTA, 3=MEDIA, 4=BAJA]

3. Estructura recomendada (en orden de importancia)

PARTE 4: VENTAJA COMPETITIVA

¬øC√≥mo SUPERAR a la competencia con esta arquitectura?
- ¬øQu√© hacen ellos que NO haya pensado?
- ¬øQu√© podr√≠a diferenciarme?
- ¬øQu√© URLs ellos NO tienen que YO S√ç podr√≠a crear?
Responde con 3-5 acciones espec√≠ficas.

FORMATO FINAL DE ARQUITECTURA (TABLA):
| Prioridad | Tipo | URL | Palabra Clave | Volumen | Dificultad | Por Qu√© |

RESPONDE TODAS LAS PARTES EN ORDEN.`;

PROMPTS.P3 = `=== KEYWORD RESEARCH PROFUNDO (100+ KEYWORDS) + INPUTS FASE 4 ===

CONTEXTO:
Nicho: [NICHO]
Palabra clave principal: [PALABRA-CLAVE-PRINCIPAL]
Idioma: [IDIOMA]
Pa√≠s: [PA√çS]
URLs planeadas: [URLS-ARQUITECTURA - lista de URLs con tipo]

INSTRUCCIONES CR√çTICAS:

1. GENERA 100+ palabras clave REALES que la gente busca en [PA√çS].
2. Cada keyword DEBE tener:
   - La palabra exacta (como se busca)
   - B√∫squedas estimadas/mes (REALISTAS)
   - Intenci√≥n de b√∫squeda (INFORMATIVA/NAVEGACIONAL/TRANSACCIONAL)
   - Categor√≠a (CALCULADORA/BLOG/HERRAMIENTA)
   - Dificultad SEO (BAJA/MEDIA/ALTA)
   - Justificaci√≥n psicol√≥gica
   - URL DESTINO donde deber√≠a ir

3. THINK CULTURALLY:
   - ¬øC√≥mo busca la gente en [PA√çS]?
   - ¬øQu√© problemas reales tiene en la vida diaria?
   - ¬øQu√© preocupaciones tienen sobre [NICHO]?
   - ¬øQu√© tendencias afectan el mercado?
   - ¬øQu√© √©pocas del a√±o buscan m√°s?

4. VARIEDADES DE KEYWORDS:
   - Marca + gen√©rica
   - Preguntas (c√≥mo, qu√©, por qu√©)
   - Long-tail espec√≠fico
   - Comparativas / How-to / Problemas

PARTE 1: TABLA COMPLETA DE KEYWORDS
| Ranking | Palabra Clave | B√∫squedas/Mes | Intenci√≥n | Categor√≠a | Dificultad | URL Destino | Justificaci√≥n |
Genera TODOS los 100+ keywords en esta tabla.

PARTE 2: INPUTS ORGANIZADOS PARA FASE 4

Reorganiza todos los keywords por URL DESTINO.
Para CADA URL genera un bloque con:
- URL, Tipo, Palabra Clave Primaria, Volumen Total Estimado
- Palabras Clave a Atacar (todas con b√∫squedas e intenci√≥n)
- Descripci√≥n de Contenido Ideal
- Estructura Sugerida (H2s)
- Inputs Espec√≠ficos para IA (Fase 4) en formato JSON:
{
  "nombre_pagina": "[Nombre]",
  "url_amigable": "[url]",
  "tipo": "[CALCULADORA / BLOG / HERRAMIENTA]",
  "palabra_clave_principal": "[KW]",
  "palabras_clave_lsi": ["kw1", "kw2", "kw3"],
  "descripcion": "[1-2 l√≠neas]",
  "intencion": "[TRANSACCIONAL / INFORMATIVA]",
  "volumen_total": [n√∫mero],
  "publico_objetivo": "[Descripci√≥n]",
  "cta_principal": "[Bot√≥n]",
  "si_es_calculadora": {
    "inputs_necesarios": ["Input 1", "Input 2"],
    "outputs_esperados": ["Output 1", "Output 2"],
    "formula_descripcion": "[F√≥rmula]"
  },
  "si_es_blog": {
    "longitud_palabras": 1500,
    "h2_principales": ["H2 1", "H2 2", "H2 3"],
    "incluir_ejemplos": true,
    "incluir_datos": true
  }
}

REPITE para CADA URL. Si tienes 5 URLs = 5 bloques. 20 URLs = 20 bloques.

PARTE 3: RESUMEN EJECUTIVO
Total URLs, Total Keywords, Volumen combinado, Dificultad promedio, Recomendaci√≥n de Prioridad.

RESPONDE CON: 1. Tabla 100+ KW  2. Bloques inputs por URL  3. Resumen ejecutivo`;

PROMPTS.P4A = `=== GENERADOR DE CALCULADORA - HTML + JAVASCRIPT COMPLETO ===

DATOS DE LA CALCULADORA (Copia del bloque JSON de Fase 3):

Nombre: [nombre_pagina]
URL amigable: /[url_amigable]/
Palabra clave principal: [palabra_clave_principal]
Palabras clave LSI: [palabras_clave_lsi]
Descripci√≥n corta: [descripcion]
P√∫blico objetivo: [p√∫blico_objetivo]
CTA principal: [cta_principal]

INPUTS QUE NECESITA: [si_es_calculadora.inputs_necesarios]
OUTPUTS (RESULTADOS): [si_es_calculadora.outputs_esperados]
C√ìMO FUNCIONA: [si_es_calculadora.formula_descripcion]

ESPECIFICACIONES T√âCNICAS:
1. DISE√ëO: Gradiente azul (#667eea) a p√∫rpura (#764ba2), Responsive (375px+), Labels claros
2. FUNCIONALIDAD: Vanilla JS, Validaci√≥n inputs, 2 decimales EUR, Error messages
3. SEO: <title> con KW, <meta description>, <h1>, Schema WebApplication+Calculator
4. CONVERSI√ìN: Bot√≥n CTA prominente, Resultado con animaci√≥n, Disclaimer

ESTRUCTURA HTML OBLIGATORIA: HTML completo con <head>, CSS inline, <body> con formulario calculadora, Schema JSON-LD, JavaScript con funci√≥n calcular().

REQUISITOS:
‚úÖ C√≥digo funciona al copiarlo tal cual
‚úÖ Validaci√≥n de inputs
‚úÖ Resultados matem√°ticamente correctos
‚úÖ Sin console.log()
‚úÖ Mobile first (375px)
‚úÖ Gradiente profesional
‚úÖ Sin errores ortogr√°ficos

GENERA: HTML COMPLETO (copy-paste ready) como UN √öNICO BLOQUE .html que funcione.`;

PROMPTS.P4B = `=== GENERADOR DE ART√çCULO BLOG - HTML COMPLETO ===

DATOS DEL ART√çCULO (Copia del bloque JSON de Fase 3):

Nombre/T√≠tulo: [nombre_pagina]
URL amigable: /[url_amigable]/
Palabra clave principal: [palabra_clave_principal]
Palabras clave LSI: [palabras_clave_lsi]
Descripci√≥n: [descripcion]
Intenci√≥n: [intenci√≥n]
P√∫blico: [p√∫blico_objetivo]
Longitud: [si_es_blog.longitud_palabras] palabras
H2 principales: [si_es_blog.h2_principales]
Incluir ejemplos: [si_es_blog.incluir_ejemplos]
Incluir datos: [si_es_blog.incluir_datos]

OBJETIVO: Art√≠culo blog COMPLETO en HTML que ranquee en Google, eduque, lleve tr√°fico a calculadoras, SEO perfecto, engagement alto.

ESTRUCTURA:
[INTRO 80-120 palabras] - Engancha con problema, promete soluci√≥n, incluye KW
[H2: SUBTEMA 1 - 250-350 palabras] - KW LSI #1, dato/estad√≠stica, p√°rrafos cortos
[H2: SUBTEMA 2 - 250-350 palabras] - KW LSI #2, casos de uso reales
[H2: SUBTEMA 3 - 250-350 palabras] - KW LSI #3, prev√© objeciones
[H2: C√ìMO USAR CALCULADORA - 150-200 palabras] - Paso a paso, LINK a calculadora
[CONCLUSI√ìN - 100-150 palabras] - Resume, CTA final a calculadora

SEO: Title 60 chars, Meta desc 155 chars, 1xH1 + 4-5xH2, KW density 0.5-1%, 2 links internos a calculadora.
TONO: Conversacional, sin jerga, "t√∫/usted", emojis 0-2.
FORMATO: P√°rrafos 2-3 oraciones, listas cuando aplique, datos verificables.

GENERA: HTML COMPLETO como UN √öNICO BLOQUE con article, Schema BlogPosting, meta tags.`;

PROMPTS.P4C = `=== GENERADOR DE HERRAMIENTA/COMPARADOR - HTML COMPLETO ===

DATOS (Copia del bloque JSON de Fase 3):

Nombre: [nombre_pagina]
URL: /[url_amigable]/
Palabra clave: [palabra_clave_principal]
Descripci√≥n: [descripcion]
P√∫blico: [p√∫blico_objetivo]
CTA: [cta_principal]

OBJETIVO: P√°gina INTERACTIVA completa con HTML profesional responsive, JavaScript sin dependencias, SEO optimizado, Conversi√≥n alta.

GENERA AHORA HTML COMPLETO Y FUNCIONAL como UN √öNICO BLOQUE .html.`;

PROMPTS.P5 = `=== GENERADOR DE P√ÅGINAS LEGALES ===

PAR√ÅMETROS:
Nombre sitio: [NOMBRE-SITIO]
Dominio: [DOMINIO]
Email contacto: [EMAIL-CONTACTO]
Pa√≠s: [PA√çS]
Tipo de p√°gina: [POL√çTICA PRIVACIDAD / T√âRMINOS DE SERVICIO / AVISO LEGAL]

INSTRUCCIONES: Crea p√°gina HTML COMPLETA y LEGAL para [TIPO-PAGINA].
- Incluye TODO para cumplir con RGPD/LOPD
- Menciona: cookies, datos personales, derechos usuario
- Secciones espec√≠ficas para [PA√çS]
- Profesional pero entendible

ESTRUCTURA POR TIPO:

POL√çTICA DE PRIVACIDAD: Introducci√≥n, Responsable tratamiento, Base legal, Datos recopilados, Derechos usuario, Cookies, Cambios pol√≠tica, Contacto.

T√âRMINOS DE SERVICIO: Aceptaci√≥n t√©rminos, Uso del sitio, Propiedad intelectual, Limitaci√≥n responsabilidad, Cl√°usulas renuncia, Modificaci√≥n t√©rminos, Jurisdicci√≥n, Contacto.

AVISO LEGAL: Identificaci√≥n sitio, Responsabilidad, Propiedad intelectual, Limitaci√≥n responsabilidad, Exclusi√≥n garant√≠as, Cookies y tracking, Cambios sitio, Contacto y jurisdicci√≥n.

GENERA AHORA HTML COMPLETO Y LEGAL. No es asesoramiento legal (disclaimer). Debe cumplir RGPD/LOPD.`;

PROMPTS.P6 = `=== GENERADOR DE P√ÅGINA INICIO - HTML COMPLETO ===

DATOS:
Nombre del sitio: [NOMBRE-SITIO]
Tagline: [TAGLINE-CORTO]
Descripci√≥n larga: [DESCRIPCI√ìN-LARGA]
Calculadoras (nombre | URL): [URLS-CALCULADORAS]
Art√≠culos blog (nombre | URL): [URLS-ARTICULOS-BLOG]

ESTRUCTURA:
1. HERO SECTION (impacto)
2. GRID DE CALCULADORAS (cards interactivas)
3. CARACTER√çSTICAS (por qu√© elegirnos)
4. PREVIEW DE BLOG (√∫ltimos art√≠culos)
5. FOOTER (se cargar√° v√≠a iframe)

Colores: Gradiente azul (#667eea) a p√∫rpura (#764ba2)
Dise√±o: Moderno, limpio, profesional. Mobile: perfecto en 375px.
GENERA HTML COMPLETO, HERMOSO Y RESPONSIVE.`;

PROMPTS.P7 = `=== GENERADOR DE HEADER & FOOTER COMPARTIDO ===

DATOS:
Nombre de marca: [NOMBRE-MARCA]
Dominio: [DOMINIO]
Links del men√∫ (nombre | URL): [URLS-MENU]

HEADER: Sticky, Gradiente #667eea ‚Üí #764ba2, Texto blanco, Logo izquierda, Menu derecha (desktop), Responsive.
FOOTER: Fondo #1a1a1a, Texto #999, Columnas con links, Copyright, Hover effects.

GENERA HTML COMPLETO CON HEADER Y FOOTER.`;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// RENDER HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function h(tag,attrs,children){
  let el=document.createElement(tag);
  if(attrs)Object.entries(attrs).forEach(([k,v])=>{
    if(k==='style'&&typeof v==='object'){Object.assign(el.style,v)}
    else if(k==='className'){el.className=v}
    else if(k.startsWith('on')){el.addEventListener(k.slice(2).toLowerCase(),v)}
    else{el.setAttribute(k,v)}
  });
  if(children!==undefined){
    if(typeof children==='string')el.textContent=children;
    else if(Array.isArray(children))children.forEach(c=>{if(c)el.appendChild(typeof c==='string'?document.createTextNode(c):c)});
    else if(children instanceof Node)el.appendChild(children);
  }
  return el;
}
function html(tag,attrs,innerHTML){let el=document.createElement(tag);if(attrs)Object.entries(attrs).forEach(([k,v])=>{if(k==='style'&&typeof v==='object')Object.assign(el.style,v);else if(k==='className')el.className=v;else el.setAttribute(k,v)});if(innerHTML)el.innerHTML=innerHTML;return el}

let promptCounter=0;
function renderPromptBlock(container,title,note,promptKey){
  const id='pb-'+(promptCounter++);
  const copyId='cp-'+id;
  const block=html('div',{className:'prompt-block'});
  const toggle=html('button',{className:'prompt-toggle'},`<span><span class="prompt-icon">üìÑ</span>${title}</span><span class="prompt-arrow" id="arr-${id}">‚ñº</span>`);
  const body=html('div',{className:'prompt-body hidden',id:'body-'+id});
  if(note)body.appendChild(html('p',{className:'prompt-note'},note));
  body.appendChild(html('button',{className:'copy-btn',id:copyId},'üìã Copiar prompt'));
  body.appendChild(html('pre',{className:'prompt-pre'},PROMPTS[promptKey]));
  toggle.onclick=()=>{
    const b=document.getElementById('body-'+id);
    const a=document.getElementById('arr-'+id);
    b.classList.toggle('hidden');a.classList.toggle('open');
  };
  document.getElementById(copyId)?.addEventListener('click',()=>copyPrompt(copyId,PROMPTS[promptKey]));
  block.appendChild(toggle);block.appendChild(body);container.appendChild(block);
  // Attach copy after append
  setTimeout(()=>{
    const cb=document.getElementById(copyId);
    if(cb)cb.onclick=()=>copyPrompt(copyId,PROMPTS[promptKey]);
  },0);
}

function renderSectionTitle(container,text){container.appendChild(html('h3',{className:'section-title'},text))}
function renderStepList(container,steps){container.appendChild(html('ol',{className:'step-list'},steps.map(s=>`<li>${s}</li>`).join('')))}
function renderInfoBox(container,colorClass,innerHTML){container.appendChild(html('div',{className:'info-box '+colorClass},innerHTML))}
function renderParagraph(container,innerHTML){container.appendChild(html('p',{style:{color:'#94a3b8',fontSize:'14px',lineHeight:'1.8'}},innerHTML))}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PHASE CONTENT RENDERERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderPhase1(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Generar <strong style="color:#f59e0b">100 ideas de nichos SEO</strong> rentables para sitios de calculadoras. Cada nicho validado con volumen real, viabilidad y potencial monetario.');
  renderSectionTitle(c,'üìù Pasos a seguir');
  renderStepList(c,['Copia el prompt de abajo','Personaliza SOLO el campo [PA√çS-DESTINO] (ej: Alemania, Espa√±a‚Ä¶)','Pega el prompt en tu IA preferida','Recibe la tabla CSV con 100 nichos','Elige 1 nicho ‚Äî el que M√ÅS te apasione']);
  renderSectionTitle(c,'üìÑ Prompt: Generador de 100 Ideas (v3.0)');
  renderPromptBlock(c,'PROMPT 1 ‚Äî Generador de 100 Ideas de Nichos SEO','Formato de salida: CSV. Personaliza SOLO [PA√çS-DESTINO].','P1');
  renderInfoBox(c,'amber','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">üìã Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">CSV con 100 filas: Ranking | Nicho | Palabra Clave | Volumen | Viabilidad | Justificaci√≥n | Potencial | Categor√≠a</p>');
}

function renderPhase2(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Analizar los <strong style="color:#f59e0b">TOP 10 competidores</strong> de tu nicho elegido, encontrar gaps y dise√±ar la arquitectura completa de URLs.');
  renderSectionTitle(c,'üìù Pasos a seguir');
  renderStepList(c,['Toma el nicho elegido en la Fase 1','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PA√çS-IDIOMA]','Copia y pega el prompt en tu IA','Obt√©n an√°lisis de competencia + arquitectura recomendada','Guarda la tabla de arquitectura ‚Äî la necesitar√°s en la Fase 3']);
  renderSectionTitle(c,'üìÑ Prompt: An√°lisis Competencia & Arquitectura (v2.0)');
  renderPromptBlock(c,'PROMPT 2 ‚Äî An√°lisis de Competencia & Arquitectura URLs','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PA√çS-IDIOMA]','P2');
  renderInfoBox(c,'amber','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">üìã Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">An√°lisis detallado + tabla de arquitectura (Prioridad | Tipo | URL | KW | Volumen | Dificultad | Por Qu√©)</p>');
}

function renderPhase3(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Identificar <strong style="color:#f59e0b">100+ keywords reales</strong>, organizarlas por URL destino, y generar los <strong style="color:#f59e0b">bloques JSON de inputs</strong> que usar√°s en la Fase 4.');
  renderSectionTitle(c,'üìù Pasos a seguir');
  renderStepList(c,['Toma la arquitectura de URLs de la Fase 2','Personaliza: [NICHO], [PALABRA-CLAVE-PRINCIPAL], [IDIOMA], [PA√çS], [URLS-ARQUITECTURA]','Pega el prompt en tu IA','Recibe: tabla de 100+ keywords + bloques JSON por URL + resumen ejecutivo','Guarda TODO ‚Äî cada bloque JSON es input directo para Fase 4']);
  renderSectionTitle(c,'üìÑ Prompt: Keyword Research + Inputs Fase 4 (v3.0)');
  renderPromptBlock(c,'PROMPT 3 ‚Äî Keyword Research Profundo + Inputs Fase 4','Personaliza: [NICHO], [PALABRA-CLAVE-PRINCIPAL], [IDIOMA], [PA√çS], [URLS-ARQUITECTURA]','P3');
  renderInfoBox(c,'green','<p style="color:#4ade80;font-size:14px;font-weight:700;margin:0">‚úÖ Checklist de salida</p><div style="color:#94a3b8;font-size:13px;margin-top:10px;line-height:2">‚òë 100+ keywords identificadas<br>‚òë Bloques JSON listos para Fase 4<br>‚òë Agrupados por URL<br>‚òë Toda la info para crear cada p√°gina</div>');
  renderInfoBox(c,'amber','<p style="color:#fbbf24;font-size:13px;margin:0">‚ö†Ô∏è <strong>IMPORTANTE:</strong> Cada bloque JSON es una "plantilla" que copiar√°s en el prompt correcto de Fase 4. Guarda TODO.</p>');
}

function renderPhase4(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Crear <strong style="color:#f59e0b">cada p√°gina de tu sitio</strong> una por una: calculadoras, blogs y herramientas. Cada una como un archivo <code style="color:#f59e0b">.html</code> independiente.');
  renderSectionTitle(c,'üìù Flujo de trabajo (repite por cada URL)');
  renderStepList(c,['Copia el bloque JSON de la Fase 3','Elige el prompt: 4A (Calculadora), 4B (Blog), 4C (Herramienta)','Reemplaza todos los campos [entre_corchetes]','Pega el prompt en tu IA y obt√©n el HTML completo','Guarda como [url_amigable].html','Repite para la siguiente URL ‚Äî sin l√≠mite']);
  renderInfoBox(c,'amber','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">üí° No hay l√≠mite. Puedes crear 5, 20, 100 URLs. Una por una.</p>');
  renderSectionTitle(c,'üìÑ Elige el tipo de p√°gina');

  const tabsDiv=h('div',{style:{display:'flex',gap:'8px',marginBottom:'24px',flexWrap:'wrap'}});
  const contentDiv=h('div',{id:'phase4-content'});

  function setTab(key){
    contentDiv.innerHTML='';
    document.querySelectorAll('.p4tab').forEach(b=>{b.className='sub-tab p4tab inactive'});
    document.getElementById('p4t-'+key).className='sub-tab p4tab active-'+(key==='calc'?'blue':key==='blog'?'purple':'pink');
    if(key==='calc'){
      renderPromptBlock(contentDiv,'PROMPT 4A ‚Äî Generador de Calculadora HTML+JS (v3.0)','USO: Uno por cada calculadora. Repite para cada nueva.','P4A');
      renderInfoBox(contentDiv,'blue','<p style="color:#60a5fa;font-size:13px;margin:0">‚è± <strong>5-8 min</strong> por calculadora ‚Üí Guarda como <code style="color:#60a5fa">[url_amigable].html</code></p>');
    } else if(key==='blog'){
      renderPromptBlock(contentDiv,'PROMPT 4B ‚Äî Generador de Blog HTML+SEO (v3.0)','USO: Uno por cada art√≠culo. Repite para cada nuevo blog.','P4B');
      renderInfoBox(contentDiv,'purple','<p style="color:#a78bfa;font-size:13px;margin:0">‚è± <strong>8-10 min</strong> por art√≠culo ‚Üí Guarda como <code style="color:#a78bfa">blog-[url].html</code></p>');
    } else {
      renderPromptBlock(contentDiv,'PROMPT 4C ‚Äî Generador de Herramienta/Comparador (v3.0)','USO: Para herramientas, comparadores, p√°ginas interactivas.','P4C');
      renderInfoBox(contentDiv,'pink','<p style="color:#f472b6;font-size:13px;margin:0">‚è± <strong>10-12 min</strong> por herramienta ‚Üí Guarda como <code style="color:#f472b6">[url].html</code></p>');
    }
  }

  [{k:'calc',l:'‚öôÔ∏è Calculadora (4A)'},{k:'blog',l:'üìù Blog (4B)'},{k:'tool',l:'üîß Herramienta (4C)'}].forEach(t=>{
    const btn=h('button',{className:'sub-tab p4tab inactive',id:'p4t-'+t.k},t.l);
    btn.onclick=()=>setTab(t.k);
    tabsDiv.appendChild(btn);
  });

  c.appendChild(tabsDiv);c.appendChild(contentDiv);
  setTab('calc');
}

function renderPhase5(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Crear las <strong style="color:#f59e0b">3 p√°ginas legales obligatorias</strong>: Pol√≠tica de Privacidad, T√©rminos de Servicio y Aviso Legal.');
  renderSectionTitle(c,'üìù Pasos a seguir');
  renderStepList(c,['Ejecuta el prompt 3 veces cambiando [TIPO-PAGINA]','1¬™: POL√çTICA DE PRIVACIDAD ‚Üí pol√≠tica-privacidad.html','2¬™: T√âRMINOS DE SERVICIO ‚Üí t√©rminos-servicio.html','3¬™: AVISO LEGAL ‚Üí aviso-legal.html']);
  renderSectionTitle(c,'üìÑ Prompt: Generador de P√°ginas Legales (v2.0)');
  renderPromptBlock(c,'PROMPT 5 ‚Äî Generador de P√°ginas Legales','Repite 3 veces cambiando [TIPO-PAGINA]. Personaliza: [NOMBRE-SITIO], [DOMINIO], [EMAIL-CONTACTO], [PA√çS]','P5');
  renderInfoBox(c,'red','<p style="color:#f87171;font-size:14px;font-weight:700;margin:0">‚ö†Ô∏è Disclaimer</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">Estas p√°ginas NO reemplazan asesoramiento legal. Consulta a un abogado especializado.</p>');
}

function renderPhase6(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Crear la <strong style="color:#f59e0b">p√°gina de inicio</strong> y el <strong style="color:#f59e0b">header/footer compartido</strong> que usar√°n todas las p√°ginas.');
  renderSectionTitle(c,'üìù Pasos a seguir');
  renderStepList(c,['Primero: crea la p√°gina de inicio con Prompt 6 ‚Üí index.html','Segundo: crea header/footer con Prompt 7 ‚Üí header-footer.html','El header-footer.html se carga en todas las p√°ginas v√≠a &lt;iframe&gt;']);
  renderSectionTitle(c,'üìÑ Prompt 6: P√°gina de Inicio (v3.0)');
  renderPromptBlock(c,'PROMPT 6 ‚Äî Generador de P√°gina Inicio HTML','Personaliza: [NOMBRE-SITIO], [TAGLINE-CORTO], [DESCRIPCI√ìN-LARGA], [URLS-CALCULADORAS], [URLS-ARTICULOS-BLOG]','P6');
  renderSectionTitle(c,'üìÑ Prompt 7: Header & Footer (v2.0)');
  renderPromptBlock(c,'PROMPT 7 ‚Äî Generador de Header & Footer','Personaliza: [NOMBRE-MARCA], [DOMINIO], [URLS-MENU]','P7');
  renderInfoBox(c,'amber','<p style="color:#94a3b8;font-size:13px;margin:0">üìå El <code style="color:#f59e0b">header-footer.html</code> se carga en TODAS las p√°ginas v√≠a <code style="color:#f59e0b">&lt;iframe&gt;</code></p>');
}

function renderPhase7(c){
  renderSectionTitle(c,'üéØ Objetivo');
  renderParagraph(c,'Revisar <strong style="color:#f59e0b">TODO</strong> el sitio con el checklist de QA y <strong style="color:#22c55e">publicar en Cloudflare Pages</strong>.');
  renderSectionTitle(c,'‚úÖ Checklist de QA');

  const cats=[
    {t:"Funcionalidad",i:["Todas las calculadoras funcionan","Resultados matem√°ticamente precisos","Validaci√≥n de inputs funciona","Se ve bien en m√≥vil (375px)","Se ve bien en desktop (1200px+)","Header/Footer se carga en TODAS las p√°ginas","No hay 404 errors"]},
    {t:"SEO",i:["Cada p√°gina tiene title √∫nico con KW","Cada p√°gina tiene meta description √∫nico","Una sola h1 por p√°gina","H2/H3 estructurados","URLs amigables","Schema JSON-LD en cada p√°gina","Images con alt text","Sitemap.xml creado","Internal links funcionan"]},
    {t:"Contenido",i:["Sin errores ortogr√°ficos","Copy profesional","Links internos funcionan","CTAs claros y visibles","Informaci√≥n verificable","P√°gina legal incluida"]},
    {t:"Rendimiento",i:["Sitio carga en < 3 seg","Sin errores en consola","Sin dependencias externas","CSS es minimal"]},
    {t:"Legal",i:["Pol√≠tica de privacidad presente","T√©rminos de servicio presentes","Aviso legal presente","Links a legales en footer"]},
  ];
  const total=cats.reduce((s,cat)=>s+cat.i.length,0);
  const done=Object.values(qaChecks).filter(Boolean).length;
  const pct=Math.round((done/total)*100);

  const barWrap=h('div',{style:{marginBottom:'16px'}});
  barWrap.innerHTML=`<div class="qa-bar-outer"><div class="qa-bar-inner" style="width:${pct}%;background:${pct===100?'#22c55e':'linear-gradient(90deg,#f59e0b,#ef4444)'}"></div></div><p class="mono" style="color:${pct===100?'#22c55e':'#64748b'};font-size:12px;margin-top:6px">${done}/${total} ‚Äî ${pct}% completado</p>`;
  c.appendChild(barWrap);

  cats.forEach((cat,ci)=>{
    c.appendChild(html('h4',{style:{color:'#cbd5e1',fontSize:'14px',marginBottom:'6px',marginTop:'16px'}},cat.t));
    cat.i.forEach((item,ii)=>{
      const key=ci+'-'+ii;
      const checked=!!qaChecks[key];
      const label=h('label',{className:'check-item '+(checked?'done':'undone'),id:'qi-'+key});
      label.innerHTML=`<span class="check-box ${checked?'done':'undone'}">${checked?'‚úì':''}</span><span class="check-text ${checked?'done':''}">${item}</span>`;
      label.onclick=()=>{qaChecks[key]=!qaChecks[key];save();renderMap()/*refresh if needed*/;showPhase(7);};
      c.appendChild(label);
    });
  });

  renderSectionTitle(c,'üìã Estructura Final de Carpetas');
  c.appendChild(html('pre',{className:'code',style:{background:'rgba(0,0,0,.4)',border:'1px solid rgba(255,255,255,.05)',borderRadius:'10px',padding:'18px',color:'#94a3b8',fontSize:'13px',lineHeight:'1.8',overflowX:'auto'}},`/tu-sitio-seo/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ header-footer.html
‚îú‚îÄ‚îÄ calculadoras/
‚îÇ   ‚îú‚îÄ‚îÄ hypothekenrechner.html
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ herramientas/
‚îÇ   ‚îî‚îÄ‚îÄ comparador.html
‚îú‚îÄ‚îÄ legal/
‚îÇ   ‚îú‚îÄ‚îÄ politica-privacidad.html
‚îÇ   ‚îú‚îÄ‚îÄ terminos-servicio.html
‚îÇ   ‚îî‚îÄ‚îÄ aviso-legal.html
‚îú‚îÄ‚îÄ sitemap.xml
‚îî‚îÄ‚îÄ robots.txt`));
  renderSectionTitle(c,'üöÄ Publicar en Cloudflare (5-10 min)');
  renderStepList(c,['Abre cloudflare.com','Pages ‚Üí Crear Proyecto','Direct Upload ‚Üí Selecciona TODOS tus archivos','Deploy','Conecta tu dominio']);
}

const RENDERERS=[renderPhase1,renderPhase2,renderPhase3,renderPhase4,renderPhase5,renderPhase6,renderPhase7];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SHOW PHASE DETAIL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showPhase(id){
  const phase=PHASES.find(p=>p.id===id);
  const done=completed.includes(id);
  const next=PHASES.find(p=>p.id===id+1);

  document.getElementById('view-map').classList.add('hidden');
  const vp=document.getElementById('view-phase');
  vp.classList.remove('hidden');
  vp.innerHTML='';

  // Nav bar
  const nav=html('div',{className:'nav-bar'});
  const backBtn=h('button',{className:'back-btn'},'‚Üê Volver al mapa');
  backBtn.onclick=()=>{vp.classList.add('hidden');document.getElementById('view-map').classList.remove('hidden');renderMap()};
  const xpDiv=html('div',{style:{display:'flex',alignItems:'center',gap:'12px'}},`<span class="mono" style="color:#f59e0b;font-size:12px;font-weight:700">${getXP()} XP</span><div style="width:80px;height:6px;background:rgba(255,255,255,.06);border-radius:3px"><div style="height:100%;width:${getPct()}%;background:linear-gradient(90deg,#f59e0b,#ef4444);border-radius:3px;transition:width .5s"></div></div>`);
  nav.appendChild(backBtn);nav.appendChild(xpDiv);vp.appendChild(nav);

  // Phase header
  const header=html('div',{style:{padding:'48px 20px 0',maxWidth:'780px',margin:'0 auto'}},`
    <div style="display:flex;align-items:center;gap:14px;margin-bottom:8px">
      <span style="font-size:36px">${phase.icon}</span>
      <div>
        <div class="mono" style="color:#64748b;font-size:12px;font-weight:700;letter-spacing:2px">FASE ${phase.id} DE ${PHASES.length}</div>
        <h1 style="font-size:clamp(22px,4vw,32px);font-weight:800;color:#f1f5f9;line-height:1.2;margin-top:4px">${phase.title}</h1>
      </div>
    </div>
    <p style="color:#64748b;font-size:15px;margin-bottom:12px">${phase.subtitle}</p>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:32px">
      <span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">‚è± ${phase.time}</span>
      <span class="mono" style="background:${done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)'};border:1px solid ${done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)'};border-radius:8px;padding:5px 14px;font-size:12px;color:${done?'#4ade80':'#f59e0b'};font-weight:700">${done?'‚úì COMPLETADA':'+'+phase.xp+' XP'}</span>
      <span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">üéØ ${phase.output}</span>
    </div>
  `);
  vp.appendChild(header);

  // Phase body
  const body=h('div',{style:{maxWidth:'780px',margin:'0 auto',padding:'0 20px 60px'}});
  body.style.animation='fadeIn .4s';
  RENDERERS[phase.id-1](body);

  // Buttons
  const btns=h('div',{style:{marginTop:'40px',display:'flex',flexDirection:'column',gap:'12px'}});
  if(!done){
    const btn=h('button',{className:'complete-btn gold'},'‚úÖ COMPLETAR FASE '+phase.id+' ‚Äî RECLAMAR +'+phase.xp+' XP');
    btn.onclick=()=>{
      if(!completed.includes(id)){completed.push(id);save();showBadge(phase)}
      showPhase(id);
    };
    btns.appendChild(btn);
  }
  if(done&&next){
    const btn=h('button',{className:'complete-btn green'},'‚Üí AVANZAR A FASE '+next.id+': '+next.title);
    btn.onclick=()=>showPhase(next.id);
    btns.appendChild(btn);
  }
  if(done&&!next){
    const btn=h('button',{className:'complete-btn green'},'üèÜ VER RESUMEN FINAL');
    btn.onclick=()=>{vp.classList.add('hidden');document.getElementById('view-map').classList.remove('hidden');renderMap()};
    btns.appendChild(btn);
  }
  body.appendChild(btns);
  vp.appendChild(body);
  window.scrollTo({top:0,behavior:'smooth'});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// RENDER MAP
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderMap(){
  const vm=document.getElementById('view-map');
  vm.innerHTML='';
  const allDone=completed.length===PHASES.length;

  // Hero
  vm.innerHTML=`
    <div class="hero">
      <div class="hero-grid"></div>
      <div class="hero-inner">
        <div class="hero-tag mono">PROFESSIONAL v2</div>
        <h1 class="hero-title">Nichos SEO de Calculadoras</h1>
        <p class="hero-sub">De <strong style="color:#f59e0b">IDEA</strong> a <strong style="color:#22c55e">SITIO PUBLICADO</strong> en 2.5-3 Horas</p>
        <div class="xp-wrap">
          <div class="xp-row">
            <span class="mono" style="color:#f59e0b;font-weight:700;font-size:14px;${completed.length>0?'animation:glow 2s infinite':''}"}>LVL: ${getLevel()}</span>
            <span class="mono" style="color:#64748b;font-size:13px">${getXP()}/${TOTAL_XP} XP</span>
          </div>
          <div class="xp-bar-outer"><div class="xp-bar-inner ${getPct()===100?'complete':'progress'}" style="width:${getPct()}%"></div></div>
          <div class="mono" style="display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:#475569"><span>${completed.length}/${PHASES.length} fases</span><span>${getPct()}%</span></div>
        </div>
        ${completed.length>0?'<div class="badges-row">'+completed.map(id=>{const p=PHASES.find(ph=>ph.id===id);return `<div class="badge-pill mono">${p.badgeIcon} ${p.badge}</div>`}).join('')+'</div>':''}
      </div>
    </div>
  `;

  // Timeline
  const tw=h('div',{className:'timeline-wrap'});

  PHASES.forEach((phase,idx)=>{
    const done=completed.includes(phase.id);
    const unlocked=phase.id===1||completed.includes(phase.id-1);
    const isNext=!done&&unlocked;
    if(!done&&!isNext)return;

    const item=h('div',{className:'timeline-item'});
    if(idx<PHASES.length-1&&done)item.appendChild(html('div',{className:'timeline-line'}));
    item.appendChild(html('div',{className:'timeline-dot mono '+(done?'done':'next')},done?'‚úì':String(phase.id)));

    const card=html('div',{className:'phase-card',style:{background:isNext?'linear-gradient(135deg,rgba(245,158,11,.08),rgba(245,158,11,.02))':'rgba(34,197,94,.03)',border:isNext?'1px solid rgba(245,158,11,.25)':'1px solid rgba(34,197,94,.12)'}},`
      <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px">
        <div style="display:flex;align-items:center;gap:12px">
          <span style="font-size:24px">${phase.icon}</span>
          <div>
            <div style="font-size:16px;font-weight:700;color:${done?'#4ade80':'#e2e8f0'}">Fase ${phase.id}: ${phase.title}</div>
            <div style="font-size:12px;color:#64748b;margin-top:2px">${phase.subtitle}</div>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:6px;padding:4px 12px;font-size:11px;color:#64748b">‚è± ${phase.time}</span>
          <span class="mono" style="background:${done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)'};border:1px solid ${done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)'};border-radius:6px;padding:4px 12px;font-size:11px;color:${done?'#4ade80':'#f59e0b'};font-weight:700">${done?'‚úì DONE':'+'+phase.xp+' XP'}</span>
          <span style="color:#475569;font-size:16px;margin-left:4px">‚Üí</span>
        </div>
      </div>
    `);
    card.onclick=()=>showPhase(phase.id);
    item.appendChild(card);
    tw.appendChild(item);
  });

  // Final card
  if(allDone){
    tw.innerHTML+=`
      <div class="final-card">
        <div style="font-size:60px;margin-bottom:16px">üèÜ</div>
        <h2 class="final-title mono">¬°MISI√ìN COMPLETA!</h2>
        <p style="color:#94a3b8;font-size:15px;margin-bottom:32px">Has completado las 7 fases. Tu sitio SEO de calculadoras est√° listo.</p>
        <div class="final-grid">
          ${["Investigaci√≥n","100+ Keywords","N URLs creadas","SEO perfecto","Legal completo","Publicado"].map(l=>`<div class="final-item">‚úÖ ${l}</div>`).join('')}
        </div>
        <h3 class="mono" style="color:#e2e8f0;font-size:16px;margin-bottom:14px">üìà Pr√≥ximos Pasos</h3>
        <div style="text-align:left;max-width:420px;margin:0 auto;color:#94a3b8;font-size:13px;line-height:2.4">
          <div><strong style="color:#f59e0b">Semana 1:</strong> Monitorea Google Analytics</div>
          <div><strong style="color:#f59e0b">Semana 2-4:</strong> Crea 2-3 backlinks</div>
          <div><strong style="color:#f59e0b">Mes 1-2:</strong> Primeros visitantes</div>
          <div><strong style="color:#f59e0b">Mes 3:</strong> Primeros ingresos</div>
          <div><strong style="color:#f59e0b">Mes 6+:</strong> Ingresos pasivos recurrentes</div>
        </div>
        <div style="margin-top:28px;padding:20px;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:14px">
          <h4 class="mono" style="color:#f59e0b;font-size:14px;margin-bottom:12px">üìä Estimaci√≥n Realista de Ingresos</h4>
          <div style="color:#94a3b8;font-size:13px;line-height:2">
            <div>Mes 1-2: <strong style="color:#e2e8f0">50-300 visitantes</strong></div>
            <div>Mes 3: <strong style="color:#e2e8f0">500-2,000 visitantes</strong></div>
            <div>Mes 6: <strong style="color:#e2e8f0">2,000-10,000+/mes</strong></div>
            <div>Ingresos: <strong style="color:#22c55e">EUR 300-5,000+/mes</strong></div>
          </div>
        </div>
        <p style="color:#64748b;font-size:14px;margin-top:28px;font-style:italic">Tu viaje empieza ahora. CREA. Vuelve en 1 mes. üöÄ</p>
      </div>
    `;
    // Reset button
    const resetBtn=h('button',{className:'reset-btn',style:{display:'block',margin:'20px auto 0'}}, '‚Ü∫ Reiniciar progreso');
    resetBtn.onclick=()=>{completed=[];qaChecks={};save();renderMap()};
    tw.appendChild(resetBtn);
  }

  if(!allDone){
    tw.innerHTML+=`
      <div class="summary-box">
        <h3 class="mono" style="color:#94a3b8;font-size:14px;margin-bottom:16px">üìä Timeline Estimado</h3>
        <div class="summary-grid">
          <span style="color:#64748b">M√≠nimo (5 URLs)</span><span class="mono" style="color:#e2e8f0">2-2.5 horas</span>
          <span style="color:#64748b">Est√°ndar (10 URLs)</span><span class="mono" style="color:#e2e8f0">2.5-3.5 horas</span>
          <span style="color:#64748b">Extenso (20+ URLs)</span><span class="mono" style="color:#e2e8f0">4+ horas</span>
        </div>
      </div>
    `;
  }

  vm.appendChild(tw);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
renderMap();
</script>
</body>
</html>
